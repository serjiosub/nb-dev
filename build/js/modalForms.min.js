$(function(){"#login"==location.hash&&$(".log").click(),"#registry"==location.hash&&$(".reg").click(),$("#log-submit").click(function(){return $.ajax({method:"POST",url:"https://web.chats.novait.com.ua/api/user/sign_in",contentType:"application/json; charset=UTF-8",dataType:"json",data:JSON.stringify({email:$("#loginform-email").val().trim(),password:$("#loginform-password").val()}),success:function(e){"success"===e.status?(dataLayer.push({event:"login-ok"}),location.href="https://web.chats.novait.com.ua?auth_key="+e.auth_key):$.ajax({method:"POST",url:"https://web.chat2desk.com/api/user/sign_in",contentType:"application/json; charset=UTF-8",dataType:"json",data:JSON.stringify({email:$("#loginform-email").val().trim(),password:$("#loginform-password").val()}),success:function(e){"success"===e.status?location.href="https://web.chat2desk.com?auth_key="+e.auth_key:"error"===e.status&&(setTimeout(function(){$("#login-form-error").fadeIn(1e3).show()}),setTimeout(function(){$("#login-form-error").fadeOut(1e3)},5e3))}})},error:function(e,o){setTimeout(function(){$(".server-error").fadeIn(1e3).show(),console.error("http response error: ",o)}),setTimeout(function(){$(".server-error").fadeOut(1e3),console.error("http response error: ",o)},5e3)}}),!1}),$("#register-firstscreen").click(function(){$("#registrationModal").modal("show")}),$("#reg-submit").click(function(){var e=JSON.stringify({email:$("#user-email").val()+"",password:$("#user-password").val()+"",password_confirmation:$("#user-repeatpassword").val()+"",company_name:$("#company-name").val()+""}),t=$("#reg-form").serialize();return lang="ua",""==document.getElementById("user-phone").value?(setTimeout(function(){$("#reg-form-error").fadeIn(1e3).show()}),setTimeout(function(){$("#reg-form-error").fadeOut(1e3)},5e3)):$.ajax({url:"https://web.chats.novait.com.ua/api/user/sign_up?lang="+lang,type:"POST",contentType:"application/json; charset=UTF-8",dataType:"json",data:e,success:function(o){o.auth_key?$.ajax({url:"../php/mail-register.php",type:"POST",data:t,success:function(e){dataLayer.push({event:"reg-ok"}),document.location.href="https://web.chats.novait.com.ua?auth_key="+o.auth_key},error:function(){document.location.href="https://web.chats.novait.com.ua?auth_key="+o.auth_key}}):"error"===o.status&&(setTimeout(function(){$("#reg-form-error").fadeIn(1e3).show()}),setTimeout(function(){$("#reg-form-error").fadeOut(1e3)},5e3))},error:function(e,o){setTimeout(function(){$(".server-error").fadeIn(1e3).show(),console.error("http response error: ",o)}),setTimeout(function(){$(".server-error").fadeOut(1e3),console.error("http response error: ",o)},5e3)}}),!1}),$(".demo_access").click(function(){$("#registrationDemoModal").modal("show"),""==document.getElementById("demo-email").value?$("#reg-demo-submit").attr("disabled","disabled"):$("#reg-demo-submit").removeAttr("disabled")}),$("#reg-demo-submit").click(function(){var e=(new Date).getTime(),t=$("#reg-demo-form").serialize();return $.ajax({url:"https://web.chats.novait.com.ua/api/user/sign_up",type:"POST",contentType:"application/json; charset=UTF-8",dataType:"json",data:JSON.stringify({email:e+"@demo.novachats.com",password:"pass"+e,password_confirmation:"pass"+e,company_name:"["+e+"][Nova.Chats Demo Chat]"}),success:function(o){o.auth_key?$.ajax({url:"../php/mail-register-demo.php",type:"POST",data:t,success:function(e){dataLayer.push({event:"reg-demo-ok"}),document.location.href="https://web.chats.novait.com.ua?auth_key="+o.auth_key},error:function(){document.location.href="https://web.chats.novait.com.ua?auth_key="+o.auth_key}}):"error"===o.status&&(setTimeout(function(){$("#reg-demo-form-error").fadeIn(1e3).show()}),setTimeout(function(){$("#reg-demo-form-error").fadeOut(1e3)},5e3))},error:function(e,o){setTimeout(function(){$(".server-error").fadeIn(1e3).show(),console.error("http response error: ",o)}),setTimeout(function(){$(".server-error").fadeOut(1e3),console.error("http response error: ",o)},5e3)}}),!1}),$("#forgot-password").click(function(){$("#reg-modal").modal("hide"),$("#lostpasswordModal").modal("show"),$("#forgotform-email").val($("#loginform-email").val()),""==document.getElementById("forgotform-email").value?$("#forgot-submit").attr("disabled","disabled"):$("#forgot-submit").removeAttr("disabled")}),$("#forgot-submit").click(function(){return $.ajax({url:"https://web.chats.novait.com.ua/api/user/reset_password",type:"POST",contentType:"application/json; charset=UTF-8",dataType:"json",data:JSON.stringify({email:$("#forgotform-email").val()+"",url_to_change_pwd:document.URL+""}),success:function(e){"success"===e.status?($("#lostpasswordModal").modal("hide"),$("#forgot-error").hide(),$("#LostPasswordModalThanks").modal("show"),$("#forgotform-email").text(e.email)):$.ajax({method:"POST",url:"https://web.chat2desk.com/api/user/reset_password",type:"POST",contentType:"application/json; charset=UTF-8",dataType:"json",data:JSON.stringify({email:$("#forgotform-email").val()+"",url_to_change_pwd:document.URL+""}),success:function(e){"success"===e.status?($("#lostpasswordModal").modal("hide"),$("#forgot-error").hide(),$("#LostPasswordModalThanks").modal("show"),$("#forgotform-email").text(e.email)):"error"===e.status&&($("#forgot-submit").attr("disabled","disabled"),setTimeout(function(){$("#noemail-error").fadeIn(1e3).show()}),setTimeout(function(){$("#noemail-error").fadeOut(1e3)},5e3))}})},error:function(e,o){setTimeout(function(){$(".server-error").fadeIn(1e3).show(),console.error("http response error: ",o)}),setTimeout(function(){$(".server-error").fadeOut(1e3),console.error("http response error: ",o)},5e3)}}),!1}),$("#restore-submit").click(function(){return $.ajax({url:"https://web.chats.novait.com.ua/api/user/change_password",type:"POST",contentType:"application/json; charset=UTF-8",dataType:"json",data:JSON.stringify({password:$("#password").val()+"",password_confirmation:$("#confirm_password").val()+"",hash:$(".change-key").val()+""}),success:function(e){"success"===e.status?location.href="https://web.chats.novait.com.ua?auth_key="+e.auth_key:$.ajax({method:"POST",url:"https://web.chat2desk.com/api/user/change_password",type:"POST",contentType:"application/json; charset=UTF-8",dataType:"json",data:JSON.stringify({password:$("#password").val()+"",password_confirmation:$("#confirm_password").val()+"",hash:$(".change-key").val()+""}),success:function(e){"success"===e.status?location.href="https://web.chat2desk.com?auth_key="+e.auth_key:"error"===e.status&&($(".clear-field").val(""),setTimeout(function(){$("#nopasserror").fadeIn(1e3).show()}),setTimeout(function(){$("#nopasserror").fadeOut(1e3)},5e3),$("#restore-submit").attr("disabled","disabled"),$("#confirm_password").attr("disabled","disabled"))}})},error:function(e,o){setTimeout(function(){$(".server-error").fadeIn(1e3).show(),console.error("http response error: ",o)}),setTimeout(function(){$(".server-error").fadeOut(1e3),console.error("http response error: ",o)},5e3)}}),!1}),$("#footer-feedback").click(function(){$("#feedbackModal").modal("show")}),$("#test-reg").click(function(){$("#registrationModal").modal("show")})});